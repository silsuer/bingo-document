# Bingo 脚手架工具

我们从 `github.com/silsuer/bingo` 中下载下来的 `bingo` 实际上是一个开发辅助工具，可以快速构建项目目录或做一些初始化工作，让开发者可以专注于业务开发,
真正的`Bingo` 框架实际上是由多个模块组成的，核心模块仅有一个 `bingo-router`，使用它就可以进行简单的开发工作量

## 创建项目

当安装脚手架之后，可以通过两种方式创建一个项目

1. 在一个已经存在的目录中初始化一个 `Bingo` 项目

   ```shell
      cd <project-name>
      bingo init
   ```

2. 在当前目录下创建一个新的项目目录

   ```
    bingo create <project-name>
   ```

## 项目目录

  ```go
    |____go.mod                       // Go Module
    |____.bingoignore                 // 此文件中的目录将不会在 bingo run dev 的监控范围内
    |____Makefile                     // 生成的一个Makefile,里面放置了一些简单的编译脚本
    |____resources                    // 模板文件夹
    | |____views                      // 放置模板
    |____utils                        // 放置工具方法
    | |____log.go                     // 默认会定义一个日志输出方式
    |____go.sum
    |____.gitignore 
    |____http                         // 与http相关的代码
    | |____middlewares                // 放置中间件
    | | |____log.go                   // 日志中间件，用来记录请求日志
    | |____controllers                // 控制器文件夹
    | | |____index_controller.go      // 控制器示例
    |____.env.yml                     // 环境文件，唯一的外部配置文件，不会被打包进程序中，开发时可以用来区分部署环境
    |____routes                       // 放置路由文件
    | |____api.go                     // 默认生成一个示例路由文件
    |____main.go                      // 程序入口
    |____console                      // 控制台命令，用来放置打包进程序的命令行程序
    | |____kernel.go                  // 命令注册文件
    | |____commands                   // 命令文件夹

  ```

  上面介绍了项目目录，需要注意的一个地方是 `commands`文件夹，这里放置的命令将会一起打包进程序中，例如一些洗数据、定时任务等命令，`Bingo` 中的命令分为两种，一种是辅助开发命令，另一种是包含业务逻辑的命令，
  我们部署到线上的程序不应当包含与开发相关的命令。

  所以与业务逻辑相关的命令放置在项目的 `console/commands` 目录中，与开发相关的命令放置在 `bingo` 脚手架中，扩展时直接扩展脚手架即可，如何扩展，下面的文档中会讲到。

## 启动服务

当使用 `bingo init` 或 `bingo create demo` 创建项目后，项目目录中会默认存在一个 `Makefile` 文件，该文件中定义了一个简单的编译脚本:

```
run:
    # 检查依赖，如果依赖不存在就获取依赖
	go get -v ./...  
    # 编译项目
	go build
    # 运行程序
	./test run
```

所以当我们在项目根目录下使用 `make run` 命令，即可执行上述脚本.自动构建和执行

而 `bingo` 脚手架中提供了 `run dev` 命令，用来在开发过程中自动进行热重启:

在项目根目录下执行

```
bingo run dev
```

这个命令将会在当前目录下首先执行 `make run` 命令,并且监控当前目录下的所有文件(包括子目录),当监控到文件存在变化，将会自动重新执行 `make run` 命令，重新构建并运行。

我们可以配置根目录下的 `.bingoignore` 文件来配置文件监控的范围，该文件默认会移除 `storage`目录(日志文件在这个目录中)

可以根据需要自行更改配置

> `.bingoignore ` 只在开发过程中有用，所以里面的目录或文件路径均是相对于当前项目目录的，请勿使用绝对路径或在路径前加 `./` ,这些写法均是错误的.

## 其他命令

   其他命令还在玩命开发中....
   
   也欢迎各位将自己常用的命令PR进项目中来...